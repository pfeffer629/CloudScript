app.service("newScript",["$http","$firebase",function(t,e){var r=this,i=new Firebase("https://luminous-heat-3537.firebaseio.com"),n=e(i);this.script=n.$asObject(),this.updateUserPrescriptions=function(){},this.newOrder=function(e){t.post("/orders",e).success(function(t){r.orderData=t,r.script.prescriptions=!0,r.script.$save().then(function(){},function(){})})},this.orderScript=function(){}}]),app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/homepage.html"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupController"}).when("/d/:doctorid/",{templateUrl:"views/doctor/home.html"}).when("/d/:doctorid/patients/:patientid",{templateUrl:"views/doctor/patient.html"}).when("/d/:doctorid/profile",{templateUrl:"views/doctor/profile.html"}).when("/p/:patientid/",{templateUrl:"views/patient/home.html"}).when("/p/:patientid/orders/new",{templateUrl:"views/patient/new_order.html"}).when("/p/:patientid/doctors/:doctorid",{templateUrl:"views/patient/doctor.html"}).when("/p/:patientid/profile",{templateUrl:"views/patient/profile.html"})}]),app.factory("chatMessages",["$firebase",function(t){var e=new Firebase("https://luminous-heat-3537.firebaseio.com"),r=t(e);return r.$remove(),r.$set("prescriptions",!1),r.$asArray()}]),app.factory("doctor",["$http",function(t){return{getPatients:function(e){t.get("/api/doctors/"+e+"/patients").success(function(t){return t})}}}]),app.factory("patient",["$http",function(t){return{getDoctors:function(e){t.get("/api/patients/"+e+"/doctors").success(function(t){return t})}}}]),app.directive("chat",function(){return{restrict:"E",templateUrl:"../partials/chat.html"}}),app.directive("newrxform",function(){return{restrict:"E",templateUrl:"../partials/doctor/new_rx_form.html"}}),app.directive("newrxpop",function(){return{restrict:"E",templateUrl:"../partials/patient/new_rx_popup.html"}}),app.directive("dprxns",function(){return{restrict:"E",templateUrl:"../partials/doctor/p_rxs.html"}}),app.directive("prxns",function(){return{restrict:"E",templateUrl:"../partials/patient/p_rxs.html"}}),app.directive("pmenu",function(){return{restrict:"E",templateUrl:"../partials/patient/menu.html"}}),app.directive("dmenu",function(){return{restrict:"E",templateUrl:"../partials/doctor/menu.html"}}),app.directive("patients",function(){return{restrict:"E",templateUrl:"../partials/doctor/patients.html"}}),app.directive("patient",function(){return{restrict:"E",templateUrl:"../partials/doctor/patient.html"}}),app.directive("doctors",function(){return{restrict:"E",templateUrl:"../partials/patient/doctors.html"}}),app.directive("doctor",function(){return{restrict:"E",templateUrl:"../partials/patient/doctor.html"}}),app.directive("prxs",function(){return{restrict:"E",templateUrl:"../partials/patient/p_rxs.html"}}),app.directive("neworder",function(){return{restrict:"E",templateUrl:"../partials/patient/new_order.html"}}),app.directive("missedmessages",function(){return{restrict:"E",templateUrl:"../partials/missed_messages.html"}}),app.directive("pprofile",function(){return{restrict:"E",templateUrl:"../partials/patient/profile.html"}}),app.directive("dprofile",function(){return{restrict:"E",templateUrl:"../partials/doctor/profile.html"}}),app.controller("RxController",["$scope","$http","$firebase","newScript",function(t,e,r,i){t.master={},t.update=function(){},t.reset=function(){},t.submit=function(e){i.updateUserPrescriptions(e),i.newOrder(e),t.new_rx_response="RX submitted!"},t.reset()}]),app.controller("ChatController",["$scope","$http","chatMessages",function(t,e,r){t.messages=r,e.get("/api/messages").success(function(e){for(var r=0;r<e.length;r++)t.messages.$add({content:e[r].content,timestamp:e[r].timestamp})}),this.sendText=function(r){t.messages.$add({content:r,timestamp:new Date}),e.post("/api/messages",{content:r,timestamp:new Date}),t.text=""}}]),app.controller("DoctorController",["$scope","$http","$routeParams",function(t,e,r){var i=r.doctorid;e.get("/api/doctors/"+i).success(function(e){t.doctor=e}),e.get("/api/doctors/"+i+"/patients").success(function(e){t.patients=e}),e.get("/api/doctors/"+i+"/rxs").success(function(e){t.rxs=e});var n=r.patientid;n&&e.get("/api/doctors/"+i+"/patients/"+n).success(function(e){t.patient=e})}]),app.controller("loginController",["$scope","$cookies","$http",function(t,e){var r=new Firebase("https://luminous-heat-3537.firebaseio.com");t.credentials={username:"",password:""},e.id=null,t.submit=function(){r.authWithPassword({email:t.credentials.username,password:t.credentials.password},function(t,r){t||(e.id=r.uid)})}}]),app.controller("newRxFormController",["$scope","$http","$firebase","newScript",function(t,e,r,i){t.master={},t.update=function(){},t.reset=function(){},t.submit=function(e){i.updateUserPrescriptions(e),i.newOrder(e),t.new_rx_response="RX submitted!"},t.reset()}]),app.controller("newScriptController",["$scope","$http","newScript",function(t,e,r){t.newScript=r}]),app.controller("PatientController",["$scope","$http","$routeParams",function(t,e,r){var i=r.patientid;e.get("/api/patients/"+i).success(function(e){t.patient=e}),e.get("/api/patients/"+i+"/doctors").success(function(e){t.doctors=e}),e.get("/api/patients/"+i+"/rxs").success(function(e){t.rxs=e});var n=r.doctorid;n&&e.get("/api/patients/"+i+"/doctors/"+n).success(function(e){t.doctor=e})}]),app.controller("registerController",["$scope","$http",function(t){var e=new Firebase("https://luminous-heat-3537.firebaseio.com");t.credentials={username:"",password:""},t.submit=function(){e.createUser({email:t.credentials.username,password:t.credentials.password},function(e){t.credentials={username:"",password:""},t.register.$setPristine()})}}]);